\label[test]\chap Testing of implementation

In reference to \ref[upgrade], only \glref{SPDP} was tested. The first test was against OpenDDS \cite[www:opendds] - open source implementation of \glref{OMG} \glref{DDS} delivered with \glref{RTPS} Discovery test and it was run between 64-bit Debian \glref{PC} and 32-bit Linux Mint \glref{PC}. The second test was \glref{ORTE} against itself on 64-bit Debian \glref{PC}. The main purpose was to test if {\em Default Multicast Locator}'s \glref{IP} address and port are available for more {\em Participants} in same {\em Domain}.

\sec ORTE to OpenDDS

Following is comment for typical \glref{RTPS} {\em Messsage} received in ``debug'' mode, containing {\em SPDPdiscoveredParticipantData}, encoded as {\em Parameter List}.

\begtt
msg len 236
header OK
pv 2.2 vid 1.3 gp 0x0103001e 0x33862b64 0x76c10000
 15 05 00 00  ; 15 = DATA; 05 = D,LE; 00 00 = till the end
 00 00 10 00  ; 00 00 = extra flags; 10 00 = 16B to next header
 00 00 00 00  ; Reader Id = ENTITYID_UNKNOW
 00 01 00 c2  ; Writer Id = ENTITYID_SPDP_BUILTIN_PARTICIPANT_WRITER
 00 00 00 00  ; SequenceNumber.high = 0
 01 00 00 00  ; SequenceNumber.low  = 1
 00 03 00 00  ; 00 03 = PL_CDR_LE; 00 00 = skipped
 15 00 04 00  ; 15 00 = Protocol Version; 04 00 = length 4B
 02 02 00 00  ; 2.2
 50 00 10 00  ; 50 00 = Participant GUID; 10 00 = length 16B
 01 03 00 1e  ; GuidPrefix
 33 86 2b 64  ; GuidPrefix
 76 c1 00 00  ; GuidPrefix
 00 00 01 c1  ; Entity Id = ENTITYID_PARTICIPANT
 16 00 04 00  ; 16 00 = Vendor Id; 04 00 = length 4B
 01 03 00 00  ; 1.3
 44 00 04 00  ; 44 00 = Builtin Endpoints; 04 00 = length 4B
 3f 0c 00 00  ; All required Builtin Endpoints present
 58 00 04 00  ; 58 00 = Builtin Endpoint Set; 04 00 = length 4B
 3f 0c 00 00  ; All required Builtin Endpoints present
 32 00 18 00  ; 00 32 = Metatraffic Unicast Locator; 18 00 = length 24B
 01 00 00 00  ; Locator.kind = LOCATOR_KIND_UDPv4
 7f a9 00 00  ; Locator.port = 43391
 00 00 00 00  ;
 00 00 00 00  ;
 00 00 00 00  ;
 c0 a8 01 75  ; Locator.address = 192.168.1.117
 32 00 18 00  ; 00 32 = Metatraffic Multicast Locator; length 24B
 01 00 00 00  ; Locator.kind = LOCATOR_KIND_UDPv4
 7f a9 00 00  ; Locator.port = 43391
 00 00 00 00  ;
 00 00 00 00  ;
 00 00 00 00  ;
 0a 01 02 04  ; Locator.address = 10.1.2.4
 31 00 18 00  ; 31 00 = Default Unicast Locator; 18 00 = length 24B
 01 00 00 00  ; Locator.kind = LOCATOR_KIND_UDPv4
 39 30 00 00  ; Locator.port = 12345
 00 00 00 00  ;
 00 00 00 00  ;
 00 00 00 00  ;
 7f 00 00 01  ; Locator.address = 127.0.0.1
 48 00 18 00  ; 48 00 = Default Multicast Locator; 18 00 = length 24B
 01 00 00 00  ; Locator.kind = LOCATOR_KIND_UDPv4
 39 30 00 00  ; Locator.port = 12345
 00 00 00 00  ;
 00 00 00 00  ;
 00 00 00 00  ;
 7f 00 00 01  ; Locator.address = 127.0.0.1
 34 00 04 00  ; 34 00 = Manual Liveliness Count; 04 00 = length 4B
 00 00 00 00  ;
 02 00 08 00  ; 02 00 = Participant Lease Duration; 08 00 = length 8B
 14 00 00 00  ; NtpTime.seconds = 20
 00 00 00 00  ; NtpTime.fraction = 0
 01 00 00 00  ; 01 00 = Sentinel (end of Parameter List)
\endtt

Following is debug output of receiving and processing \glref{RTPS} {\em Message} with \glref{SPDP} traffic. At the end of the output, actual database of all {\em Entities} is shown between "DUMP: start" and "DUMP: end".

\begtt
1450639459.774 | ORTEAppRecvThread MD: waiting for message to receive
1450639460.456 | ORTEAppRecvThread MD: received message of length 208
1450639460.456 | ORTEAppRecvThread: RTPS Header OK
1450639460.456 |   PV: 2.2 VID:1.3 GP: 0x0103001e 0x33862b64 0x2b700000
1450639460.456 | ...ead MD: submessage: kind 0x15, flags 0x5, length 184
1450639460.456 | RTPSDataProcess: start
1450639460.456 | RTPSDataProcess: extraFlags: 0x0
1450639460.456 | RTPSDataProcess: octetsToInlineQos: 0x10
1450639460.456 | RTPSDataProcess: reader EID:   00000000
1450639460.456 | RTPSDataProcess: writer EID: 0x000100c2
1450639460.456 | RTPSDataProcess: Sequence Number: 0.8
1450639460.456 | SPDPdiscoveredParticipantData_deserialize:
1450639460.456 |   id: 0x15, len: 4
1450639460.456 |   value: 2.2
1450639460.456 |   id: 0x50, len: 16
1450639460.456 | objectEntryAdd: start
1450639460.456 | objectEntryAdd: GP  : 0x0103001e 0x33862b64 0x2b700000
1450639460.456 | objectEntryAdd: Entity: 0x000001c1 connected to GP
1450639460.456 | objectEntryAdd: Entity: 0x000001c1 created
1450639460.456 | objectEntryAdd: finished
1450639460.456 | eventDetach: GP: 0x0103001e 0x33862b64 0x2b700000
1450639460.456 | eventDetach: finished
1450639460.456 | eventAdd: ObjectEntry_leaseDurationTimer
1450639460.456 | htimerUnicastCommon: root updated, wakeup
1450639460.456 | WakeUpSendingThread : start
1450639460.456 | WakeUpSendingThread : send wakeup signal
1450639460.456 | eventAdd: finished
1450639460.456 |   value: 0x0103001e 0x33862b64 0x2b700000, 0x000001c1
1450639460.456 |   id: 0x16, len: 4
1450639460.456 |   value: 1.3
1450639460.456 |   id: 0x44, len: 4
1450639460.456 | objectEntryAdd: start
1450639460.456 | objectEntryAdd: Entity: 0x000100c2 created
1450639460.456 | objectEntryAdd: finished
1450639460.456 | objectEntryAdd: start
1450639460.456 | objectEntryAdd: Entity: 0x000100c7 created
1450639460.456 | objectEntryAdd: finished
1450639460.456 | objectEntryAdd: start
1450639460.456 | objectEntryAdd: Entity: 0x000003c2 created
1450639460.456 | objectEntryAdd: finished
1450639460.456 | objectEntryAdd: start
1450639460.456 | objectEntryAdd: Entity: 0x000003c7 created
1450639460.456 | objectEntryAdd: finished
1450639460.456 | objectEntryAdd: start
1450639460.456 | objectEntryAdd: Entity: 0x000004c2 created
1450639460.456 | objectEntryAdd: finished
1450639460.456 | objectEntryAdd: start
1450639460.456 | objectEntryAdd: Entity: 0x000004c7 created
1450639460.456 | objectEntryAdd: finished
1450639460.456 | objectEntryAdd: start
1450639460.456 | objectEntryAdd: Entity: 0x000200c2 created
1450639460.456 | objectEntryAdd: finished
1450639460.456 | objectEntryAdd: start
1450639460.456 | objectEntryAdd: Entity: 0x000200c7 created
1450639460.456 | objectEntryAdd: finished
1450639460.456 |   value: 3135
1450639460.456 |   id: 0x58, len: 4
1450639460.456 | objectEntryAdd: start
1450639460.456 | objectEntryAdd: finished
1450639460.456 | objectEntryAdd: start
1450639460.456 | objectEntryAdd: finished
1450639460.456 | objectEntryAdd: start
1450639460.456 | objectEntryAdd: finished
1450639460.456 | objectEntryAdd: start
1450639460.456 | objectEntryAdd: finished
1450639460.456 | objectEntryAdd: start
1450639460.456 | objectEntryAdd: finished
1450639460.456 | objectEntryAdd: start
1450639460.456 | objectEntryAdd: finished
1450639460.456 | objectEntryAdd: start
1450639460.456 | objectEntryAdd: finished
1450639460.456 | objectEntryAdd: start
1450639460.456 | objectEntryAdd: finished
1450639460.456 |   value: 3135
1450639460.456 |   id: 0x32, len: 24
1450639460.456 |   value: 192.168.1.117:34681 (kind 1)
1450639460.456 |   id: 0x31, len: 24
1450639460.456 |   value: 127.0.0.1:12345 (kind 1)
1450639460.456 |   id: 0x48, len: 24
1450639460.456 |   value: 127.0.0.1:12345 (kind 1)
1450639460.456 |   id: 0x34, len: 4
1450639460.456 |   value: 0
1450639460.456 |   id: 0x2, len: 8
1450639460.456 | eventDetach: GP: 0x0103001e 0x33862b64 0x2b700000
1450639460.456 | eventDetach: finished
1450639460.456 | eventAdd: ObjectEntry_leaseDurationTimer
1450639460.456 | htimerUnicastCommon: root updated, wakeup
1450639460.456 | WakeUpSendingThread : start
1450639460.456 | WakeUpSendingThread : send wakeup signal
1450639460.456 | eventAdd: finished
1450639460.456 |   value: 20s 0f
1450639460.456 |   id: 0x1, len: 0
1450639460.456 |   value: sentinel
1450639460.456 | RTPSDataProcess: finished
1450639460.456 | ORTEAppRecvThread: message 0x15 processed
1450639460.456 | ORTEAppRecvThread: processing of message(s) finnished
1450639460.456 | DUMP: start
1450639460.456 | GP:   00000000 0x0000c0a8 0x016525bc
1450639460.457 |   EID: 0x00000104
1450639460.457 |   EID: 0x000001c1
1450639460.457 |   EID: 0x000100c2
1450639460.457 |   EID: 0x000100c7
1450639460.457 | GP: 0x0103001e 0x33862b64 0x2b700000
1450639460.457 |   EID: 0x000001c1
1450639460.457 |   EID: 0x000003c2
1450639460.457 |   EID: 0x000003c7
1450639460.457 |   EID: 0x000004c2
1450639460.457 |   EID: 0x000004c7
1450639460.457 |   EID: 0x000100c2
1450639460.457 |   EID: 0x000100c7
1450639460.457 |   EID: 0x000200c2
1450639460.457 |   EID: 0x000200c7
1450639460.457 | DUMP: end
\endtt

Because the "objectEntry" database contains remote {\em Participant} and it's builtin {\em Endpoints}, test of the \glref{SPDP} was successful.

\sec ORTE to ORTE

It was successfully tested that {\em Default Multicast Locator}'s \glref{IP} address and port can be shared. Two {\em Participants} with different "participantId" and with the same "domainId" was run on 64-bit Debian \glref{PC}. They both fill it's "objectEntry" database with remote {\em Participant} and it's builtin {\em Endpoints} with no problems.

